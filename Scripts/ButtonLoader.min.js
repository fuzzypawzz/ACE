var createButtons=function(){var e={id:"_dropdown-bookmarks",class:"dropdown-bookmarks"},t={id:"favoritestoggle1",class:""},n={id:"dropdownBtnLinks",class:"dropdown-content-1"},o={id:"btnDropdown",class:""},a={id:"_dropdown-search",class:"dropdown-search"},r={id:"_noBookmarksMsg",class:"noBookmarksMsg"},
    s={humanyInterfaceName:"tjekit-all-brands",bookmarkCookies:[],bookmarkElements:[],buttonsArray:[],hasNoBookmarks:!1,noBookmarksText:"Du har ingen favoritter"};return{initiate:function(){var r,i,d,c,u;i=new this.Dropdown({tag:"DIV",className:e.class,id:e.id}).create(),(r=document.querySelector("#".concat(t.id)))
    .appendChild(i),updatedBookmarks=this.isCookiesUpdated(),updatedBookmarks?this.addGuideFavorites(updatedBookmarks):this.addGuideFavorites(),linksDropdown=new this.Dropdown({tag:"DIV",className:n.class,id:n.id}).create(),systemLinksBtn=document.querySelector("#".concat(o.id)),systemLinksBtn.appendChild(linksDropdown),
    (c=new this.Dropdown({tag:"INPUT",className:a.class,id:a.id}).create()).placeholder="Søg..",c.setAttribute("onkeyup","createButtons.searchSystemBtns()"),linksDropdown.appendChild(c),c.addEventListener("focus",function(){linksDropdown.style.display="block"}),c.addEventListener("focusout",function(){linksDropdown
    .style.removeProperty?linksDropdown.style.removeProperty("display"):linksDropdown.style.removeAttribute("display")}),(u=document.createElement("i")).className="fa fa-search dropdown-search-icon",linksDropdown.appendChild(u),d=new this.Dropdown({tag:"DIV",className:"dropdown-contents",id:"_dropdown-contents"})
    .create(),linksDropdown.appendChild(d),0===s.buttonsArray.length&&this.addSystemLinks(),s.buttonsArray.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),s.buttonsArray.forEach(function(e){var t;""!==e.url&&(t=new createButtons.CreateBtn({descr:e.name,icon:e.icon,url:e.url,tag:"A",openInNewTab:e.target})
    .create(),d.appendChild(t))}),r.addEventListener("mouseenter",function(){var e=createButtons.isCookiesUpdated();e&&createButtons.addGuideFavorites(e)})},CreateBtn:function(e){var t;this.descr=e.descr,this.icon=e.icon,this.url=e.url,this.tag=e.tag,this.openInNewTab=e.openInNewTab,0==this.openInNewTab?t="":1==this
    .openInNewTab&&(t="_blank"),this.create=function(){var e=document.createElement(this.tag);this.url&&e.setAttribute("href",this.url),e.setAttribute("target",t);var n=document.createElement("i");n.className=this.icon;var o=document.createElement("span");return o.className="buttonspan",o.innerHTML=" "+this.descr,
    e.appendChild(n),n.appendChild(o),e}},Dropdown:function(e){this.tag=e.tag,this.className=e.className,this.id=e.id,this.create=function(){var t=document.createElement(this.tag);return e.className&&(t.className=this.className),e.id&&(t.id=this.id),t}},getGuideCookies:function(){var e;return(e=function(e){var t=document
    .cookie;if(t.length>0){var n=t.indexOf(e+"=");if(-1!=n){n=n+e.length+1;var o=t.indexOf(";",n);return-1==o&&(o=t.length),unescape(t.substring(n,o))}}return null}("bookmarks"))?JSON.parse(e):[]},isCookiesUpdated:function(){var e;return 0===(e=this.getGuideCookies()).length?(s.hasNoBookmarks=!0,e):(s.hasNoBookmarks=!1,
    !function(e,t){var n,o;if(e.length!==t.length)return!1;n=e.sort(function(e,t){return t-e}),o=t.sort(function(e,t){return t-e});for(var a=0;a<e.length;a++)if(n[a]!==o[a])return!1;return!0}(e,s.bookmarkCookies)&&e)},addGuideFavorites:function(t){var n,o;if(n=document.querySelector("#".concat(e.id)),t){for(s.bookmarkCookies=[],
    s.bookmarkElements=[];n.firstChild;)n.removeChild(n.firstChild);if(s.hasNoBookmarks)return void this.displayDropdownMessage(s.noBookmarksText);o=new this.CreateBtn({descr:"Henter dine bogmærker..",icon:"fa fa-info-circle",tag:"A",openInNewTab:!1}).create(),n.appendChild(o),t.sort(function(e,t){return t-e}).forEach(function(e)
    {var t,n,o,a;s.bookmarkCookies.push(e),a="https://telia-dk.humany.net/".concat(s.humanyInterfaceName,"/guides/").concat(e,"?language=da&credentials=true"),(o=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&200==this.status&&(fetchedJSON=JSON.parse(o.responseText),n=fetchedJSON.Title,
    t=new createButtons.CreateBtn({descr:n,icon:"fa fa-star",url:"https://telia-dk.humany.net/".concat(s.humanyInterfaceName,"/").concat(n,"/").concat(e),tag:"A",openInNewTab:!1}).create(),s.bookmarkElements.push(t))};try{o.open("GET",a,!1),o.send()}catch(e){console.log(e)}}),o.remove()}s.bookmarkElements.forEach(function(e)
    {n.appendChild(e)})},displayDropdownMessage:function(t){var n,o;n=document.querySelector("#".concat(e.id)),(o=new this.CreateBtn({descr:t,icon:"fa fa-info-circle",tag:"A",openInNewTab:!1}).create()).id=r.id,n.appendChild(o)},addSystemLinks:function(){try{createSystemBtnsJSON.buttons.forEach(function(e){var t,n,o,a;
    t=e.properties.name,n=e.properties.url,o=e.properties.icon,a=e.properties.openInNewTab,s.buttonsArray.push({name:t,url:n,icon:o,target:a})})}catch(e){console.log("%cCreation of links/button failed, make sure the JSON structure is correct.","color: red; font-size: 14px"),console.log(e)}},searchSystemBtns:function()
    {var e,t,n,o;for(e=document.getElementById("_dropdown-search").value.toUpperCase(),t=document.getElementById("_dropdown-contents").getElementsByTagName("a"),o=0;o<t.length;o++)((n=t[o].getElementsByTagName("span")[0]).textContent||n.innerText).toUpperCase().indexOf(e)>-1?t[o].style.display="":t[o].style.display="none"}}}();